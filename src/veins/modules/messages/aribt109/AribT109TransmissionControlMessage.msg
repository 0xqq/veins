//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU Lesser General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
// 
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Lesser General Public License for more details.
// 
// You should have received a copy of the GNU Lesser General Public License
// along with this program.  If not, see http://www.gnu.org/licenses/.
// 

// This message handles the following request from the ARIB STD-T109

// IR-UNITDATA.request 
// This primitive is the service request primitive for requesting the transfer of an ISDU. 
// This primitive shall provide the parameters as follows:   

// IR-UNITDATA.request (LinkAddress, data, SequenceNumber,ControlInformation)  

// The LinkAddress parameter specifies the destination address.
// The data parameter specifies the ISDU (data which comes from Layer 7) to be transferred by the IVC-RVC Layer.
// The SequenceNumber parameter specifies the parameter as described in 4.5.2.1.4(1). 
// The ControlInformation parameter specifies the parameter as described in 4.5.2.1.4(2). 
// This primitive is always generated by the Layer 7 entity. 

// DL-UNITDATA.request (LinkAddress, data, SequenceNumber, ControlInformation)
// The LinkAddress parameter specifies the destination address.
// The data parameter specifies the LSDU to be transferred by the data link layer entity.
// The SequenceNumber parameter specifies the parameter as described in 4.5.2.1.4(1).
// The ControlInformation parameter specifies the parameter as described in 4.5.2.1.4(2). 

// MA-UNITDATA.request 
// This primitive is a service request primitive and shall be passed from the LLC sublayer to the MAC sublayer to request the transmission of an MSDU.
// This primitive shall provide parameters as follows: 

// MA-UNITDATA.request (SequenceNumber, LinkAddress, data, ControlInformation)

// The “SequenceNumber” parameter shall be set to the parameters specified in 4.5.2.1.4(1).
// The “LinkAddress” parameter shall be set to the destination link address.
// The “data” parameter shall be set to the MSDU transmitted by the MAC entity.
// The “ControlInformation” parameter shall be set to the radio communication parameters specified in 4.5.2.1.4(2).
cplusplus{{
#include "veins/base/utils/SimpleAddress.h"
#include "veins/modules/utility/ConstsAribT109.h" 
}};

class LAddress::L2Type extends void;

packet AribT109TransmissionControlMessage {
    
    // destination address
    LAddress::L2Type LinkAddress;
    
    // Number of packet sequence
    // see app layer 4.5.2.1.4
    int sequenceNumber;
    
    // number of packet in total
    int packetNumber;
    
    // ControlInformation field
    // consists only of data rate field because other bits are reserved but not used
    int dataRate;
}
